# ホットペッパービューティー分析ツール 要件定義書

**作成日**: 2025年12月10日
**バージョン**: 1.0
**プロジェクト名**: HPB Comparison Tool

---

## 1. プロジェクト概要

### 1.1 目的
ホットペッパービューティーに掲載されている美容サロンのページを分析し、競合比較・改善提案を行うツールを開発する。

### 1.2 対象ユーザー
- 各店舗店長
- マネージャー
- オーナー

### 1.3 利用頻度
月1〜2回程度

---

## 2. 技術スタック

| 項目 | 技術 |
|------|------|
| フレームワーク | Streamlit |
| URL解析 | Gemini API (URL Context機能) |
| 言語 | Python |
| デプロイ | Streamlit Cloud（予定） |

---

## 3. 機能要件

### 3.1 MVP（最小実用製品）機能

#### 3.1.1 URL入力・解析機能
- **機能**: ホットペッパービューティーのサロンURLを入力し、ページ内容を解析
- **入力**: 最大3店舗のURL（自店舗1つ + 競合2つ）
- **解析エンジン**: Gemini URL Context API
- **解析対象**:
  - サロン基本情報（店名、エリア、営業時間等）
  - クーポン・メニュー情報
  - （可能であれば）口コミサマリー

#### 3.1.2 比較分析機能【最優先】
- **機能**: 複数店舗の情報を比較分析
- **評価項目**（及第点: 3-4項目）:
  1. **PV獲得力**: キャッチコピー、写真の魅力度、SEO観点
  2. **CV転換力**: クーポン訴求力、予約導線の分かりやすさ
  3. **価格競争力**: 競合との価格帯比較
  4. **差別化ポイント**: 独自の強み・特徴の明確さ
- **出力**: 各項目のスコア（5段階）+ 改善提案

#### 3.1.3 レポート出力機能【最優先】
- **形式**:
  - 画面表示（リアルタイム）
  - PDF出力（グラフ・チャート付き）
- **含まれる内容**:
  - 総合スコアチャート（レーダーチャート）
  - 各項目の詳細評価
  - 競合比較表
  - 改善提案リスト

#### 3.1.4 AIチャット機能【最優先】
- **機能**: 分析結果について対話形式で質問可能
- **実装**: Gemini APIを使用したチャットインターフェース
- **ユースケース**:
  - 「この店舗の強みをもっと詳しく教えて」
  - 「クーポンの改善案を3つ提案して」
  - 「競合Aと比べて勝っている点は？」

### 3.2 将来拡張機能（Phase 2以降）

| 機能 | 説明 | 優先度 |
|------|------|--------|
| ブログ分析 | ブログ記事の内容・更新頻度分析 | 中 |
| 口コミ詳細分析 | 口コミのセンチメント分析 | 中 |
| 履歴保存 | 過去の分析結果を保存・推移確認 | 低 |
| LINE連携 | LINE公式アカウントとの連携認証 | 低 |
| 10項目詳細評価 | より詳細な評価軸の追加 | 低 |

---

## 4. 非機能要件

### 4.1 UI/UX要件

#### 4.1.1 モバイル対応【絶対条件】
- **レスポンシブデザイン**: スマートフォンで快適に操作可能
- **タッチ操作最適化**: ボタンサイズ、入力フィールドはタップしやすいサイズ
- **縦スクロール設計**: 横スクロールを極力排除
- **文字サイズ**: 最小14px以上を維持

#### 4.1.2 デザイン
- シンプルな標準デザイン（Streamlitデフォルトベース）
- 見やすい配色（高コントラスト）
- 直感的なナビゲーション

### 4.2 パフォーマンス要件
- **分析時間**: 2-3分程度（及第点）
- **目標**: 可能な限り高速化を図る
- **プログレス表示**: 処理中は進捗状況を表示

### 4.3 セキュリティ要件
- APIキーは環境変数で管理
- ユーザー入力のサニタイズ

---

## 5. 画面構成

### 5.1 メイン画面（URL入力）
```
┌─────────────────────────────┐
│  🏪 HPB分析ツール           │
├─────────────────────────────┤
│                             │
│  【自店舗URL】              │
│  ┌─────────────────────┐   │
│  │ URLを入力...         │   │
│  └─────────────────────┘   │
│                             │
│  【競合店舗URL①】          │
│  ┌─────────────────────┐   │
│  │ URLを入力...         │   │
│  └─────────────────────┘   │
│                             │
│  【競合店舗URL②】          │
│  ┌─────────────────────┐   │
│  │ URLを入力...         │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │     🔍 分析開始      │   │
│  └─────────────────────┘   │
│                             │
└─────────────────────────────┘
```

### 5.2 分析結果画面
```
┌─────────────────────────────┐
│  📊 分析結果                │
├─────────────────────────────┤
│                             │
│  【総合スコア】             │
│  ┌─────────────────────┐   │
│  │  レーダーチャート     │   │
│  │  (自店舗 vs 競合)     │   │
│  └─────────────────────┘   │
│                             │
│  【詳細評価】               │
│  ├─ PV獲得力: ★★★★☆     │
│  ├─ CV転換力: ★★★☆☆     │
│  ├─ 価格競争力: ★★★★★   │
│  └─ 差別化: ★★★☆☆       │
│                             │
│  【改善提案】               │
│  1. キャッチコピーを...    │
│  2. クーポン訴求を...      │
│                             │
│  ┌─────────────────────┐   │
│  │   📥 PDF出力         │   │
│  └─────────────────────┘   │
│                             │
└─────────────────────────────┘
```

### 5.3 AIチャット画面
```
┌─────────────────────────────┐
│  💬 AI相談                  │
├─────────────────────────────┤
│                             │
│  ┌─────────────────────┐   │
│  │ AI: 分析結果について  │   │
│  │ 何でもお聞きください  │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ You: クーポンの改善   │   │
│  │ 案を教えて           │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ AI: 以下の3点を      │   │
│  │ 提案します...        │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ メッセージを入力...   │   │
│  └─────────────────────┘   │
│  ┌──────┐                  │
│  │ 送信 │                  │
│  └──────┘                  │
└─────────────────────────────┘
```

---

## 6. データフロー

```
[ユーザー]
    │
    ▼ URL入力
[Streamlit UI]
    │
    ▼ URL送信
[Gemini API - URL Context]
    │
    ▼ ページ解析結果
[分析ロジック]
    │
    ├─▶ スコアリング
    ├─▶ 比較分析
    └─▶ 改善提案生成
    │
    ▼
[結果表示 / PDF出力 / AIチャット]
```

---

## 7. API仕様

### 7.1 Gemini URL Context API使用
```python
# 使用例（概要）
import google.generativeai as genai

model = genai.GenerativeModel('gemini-2.0-flash')
response = model.generate_content([
    "このURLのサロン情報を分析してください",
    {"url": "https://beauty.hotpepper.jp/..."}
])
```

### 7.2 分析プロンプト設計
- サロン基本情報抽出プロンプト
- 競合比較分析プロンプト
- 改善提案生成プロンプト
- チャット応答プロンプト

---

## 8. 開発フェーズ

### Phase 1: MVP（初回リリース）
1. URL入力画面の実装
2. Gemini URL Context連携
3. 基本分析ロジック（4項目評価）
4. 比較結果表示画面
5. シンプルなPDF出力
6. AIチャット機能
7. モバイル最適化

### Phase 2: 機能拡張（将来）
- ブログ・口コミ詳細分析
- 履歴保存機能
- LINE認証連携
- 詳細評価項目の追加

---

## 9. 制約事項・前提条件

### 9.1 技術的制約
- Gemini APIの利用制限（レート制限）に従う
- ホットペッパービューティーの構造変更時は対応が必要

### 9.2 前提条件
- Gemini APIキーが利用可能であること
- インターネット接続環境があること
- 対象URLがホットペッパービューティーの有効なサロンページであること

---

## 10. 成果物一覧

| 成果物 | 説明 |
|--------|------|
| `app.py` | Streamlitメインアプリケーション |
| `analyzer.py` | Gemini API連携・分析ロジック |
| `pdf_generator.py` | PDFレポート生成モジュール |
| `requirements.txt` | 依存パッケージ一覧 |
| `.env.example` | 環境変数テンプレート |
| `README.md` | セットアップ・使用方法ドキュメント |

---

## 11. 承認

| 項目 | 担当者 | 日付 |
|------|--------|------|
| 要件定義承認 | | |
| 設計承認 | | |
| リリース承認 | | |

---

**備考**:
- 本要件定義書は、ヒアリングシート（2025年12月9日 大城開様記入）を基に作成
- MVP機能を優先し、段階的に機能拡張を行う方針
